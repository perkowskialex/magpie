<%- include('../partials/header') %>
<main>
  <br>
  <h3 class = 'blue-text text-darken-3'>Budgets</h3>
  <table id="list" class='blue-text text-darken-3 highlight'>
    <br>
    <br>
    <thead>
      <tr>
        <th>User</th>
        <th>Budget Name</th>
        <th>Income</th>
        <th>Edit?</th>
        <th>Delete Budget</th>
        <th>View Expenses</th>
      </tr>
    </thead>
    <tbody>
      <% if (user.budgets.length > 0) { %>
      <tr>
        <% user.budgets.forEach(function(b) { %>
        <td><%=user.name%></td>
        <td><%=b.budgetName%></td>
        <td><%=b.income%></td>
        <td>
            <form action="/budgets/<%=b._id%>/edit" method="GET"> 
            <button class="btn-floating waves-effect yellow"><i class="large material-icons">mode_edit</i></button></a></form>
        </td>
        <td>
          <form action="/budgets/<%=b._id%>?_method=DELETE" class="delete-form" method="POST">
            <button class="btn-floating waves-effect waves-light red"><i class="material-icons">delete</i></button>
          </form>
        </td>
        <td><a href="/budgets/<%= b._id %>"> <button class="btn-floating waves-effect waves-light" type="submit"
              name="action">
              <i class="material-icons right">visibility</i>
            </button></a></td>
      </tr>
      <% }); %>
      <% } else { %>
        <br>
      <h3>No budgets found.</h3>
      <% } %>
    </tbody>
  </table>
  <br>
  <div class = 'add-expense'>
  <a href="/budgets/new"> <button class="btn-large waves-effect waves-light pulse" type="submit" name="action">Create a Budget
    <i class="material-icons right">add</i>
  </button></a>
</div>
</main>
<%- include('../partials/footer') %>